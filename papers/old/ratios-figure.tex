\documentclass{article}
\usepackage{fullpage}
\usepackage{txfonts}
\usepackage{pgfplots}

\newcommand\Ion[2]{\ensuremath{\mathrm{#1\,\scriptstyle #2}}}
\newcounter{ionstage}
\newcommand{\ion}[2]{% replace the aastex version
  \setcounter{ionstage}{#2}%
  \Ion{#1}{\Roman{ionstage}}}

\usepgfplotslibrary{external}
\tikzset{external/force remake}
\tikzexternalize

\pgfplotsset{
  compat=1.5.1, % most current version as of writing (27 Jan 2012)
  % compat=newest, % select to always use latest version (may cause minor appearance changes)
  width=0.8\textwidth,
  every axis legend/.append style={
    % make legend less tightly packed
    inner xsep=0.5em,
    inner ysep=3pt,
    nodes={
      inner xsep=1em,
      text depth=0.25em
    },
  },
}
\pgfplotsset{}
\begin{document}
\begin{tikzpicture}
  \begin{loglogaxis}[
    xlabel={Observed Intensity, \(100 \times I(\lambda)/I(\mathrm{H}\beta)\)}, 
    ylabel={Model Intensity, \(100 \times I(\lambda)/I(\mathrm{H}\beta)\)},
    log ticks with fixed point,
    legend columns=3,
    legend pos=north west,
    % transpose legend,
    ]
    \addplot [
    scatter/classes={
      H1={mark=*,brown},% 
      He1={mark=*,green},% 
      C2={mark=triangle*,black},%  
      N2={mark=triangle*,cyan},% 
      O1={mark=*,orange},% 
      O3={mark=square*,orange},%
      Ne3={mark=square*,blue},%
      S2={mark=triangle*,red},% 
      S3={mark=square*,red},% 
      Ar3={mark=square*,magenta},%
      Fe3={mark=square*,yellow}%
    },
    only marks, scatter, 
    scatter src=explicit symbolic,
    point meta=explicit symbolic,
    nodes near coords*={\tiny\pgfmathprintnumber[set thousands separator={}]\LAMBDA\,\AA},
    visualization depends on={\thisrow{lambda} \as \LAMBDA},
    error bars/x dir=both,
    error bars/x explicit,
    error bars/y dir=none,
    ] table [
    x=Observed, 
    y=Model, 
    x error=Error,
    meta=El
    ] {ratios-177341.dat};
    \addlegendentry{\ion{H}{1}} 
    \addlegendentry{\ion{He}{1}} 
    \addlegendentry{\ion{C}{2}} 
    \addlegendentry{[\ion{N}{2}]} 
    \addlegendentry{[\ion{O}{1}]}
    \addlegendentry{[\ion{O}{3}]}
    \addlegendentry{[\ion{Ne}{3}]}
    \addlegendentry{[\ion{S}{2}]}
    \addlegendentry{[\ion{S}{3}]}
    \addlegendentry{[\ion{Ar}{3}]}
    \addlegendentry{[\ion{Fe}{3}]}
    \label[Ne3]{marker:Ne3}
    \addplot [gray,domain=0.2:300] {x};
  \end{loglogaxis}
\end{tikzpicture}

% The marker for [\ion{Ne}{3}] is \ref{marker:Ne3}

\end{document}
